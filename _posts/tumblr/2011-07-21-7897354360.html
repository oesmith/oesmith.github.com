---
layout: post
title: Make TimeMachine in OS X Lion work with Debian Squeeze (stable) netatalk servers
---

<p>All you need to do to get TimeMachine running again is to install the netatalk package from unstable.  It&#8217;s a really simple process.  First add the wheezy (testing) repository to your apt configuration.</p>



<pre><code># /etc/apt/sources.list

# stable repo

deb <a href="http://cdn.debian.net/debian">http://cdn.debian.net/debian</a> squeeze main

# new testing repo

deb <a href="http://cdn.debian.net/debian">http://cdn.debian.net/debian</a> wheezy main

</code></pre>



<p>Then give your squeeze repo a higher priority to your wheezy one (to prevent wheezy packages being accidentally installed when they&#8217;re not wanted).</p>



<pre><code># /etc/apt/preferences.d/priorities



Package: *

Pin: release a=squeeze

Pin-Priority: 700



Package: *

Pin: release a=wheezy

Pin-Priority: 650

</code></pre>



<p>Now install netatalk, making sure to tell apt-get to get it from the wheezy repo.</p>



<pre><code>sudo apt-get install netatalk/wheezy

</code></pre>



<p>And remember, if you&#8217;ve added an afpd service description to your avahi-daemon configuration, remove it and restart netatalk (because netatalk 2.2beta will register itself automatically with avahi).</p>



<p>Happy Lion-ing!</p>
